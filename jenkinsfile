node{
  stage('clone'){
    git 'https://github.com/PrakashGit404/VProfile'
  }
  stage('compile-pack'){
    def mvnHome = tool name: 'mvn', type: 'maven'
    sh "${mvnHome}/bin/mvn clean compile package"
  }
  stage('sonar qube'){
    def mvnHome = tool name: 'mvn', type: 'maven'
      withSonarQubeEnv('sonar server'){
      sh "${mvnHome}/bin/mvn sonar:sonar"
    }
  }
  stage('Nexus') {
        def pom = readMavenPom file: 'pom.xml'
        nexusArtifactUploader artifacts: [
        [artifactId: 'vprofile', 
        classifier: '', 
        file: 'vprofile-v1.war', 
        type: 'war']], 
        credentialsId: 'nexus-credentials', 
        groupId: 'com.visualpathit', 
        nexusUrl: '13.235.100.21:8081', 
        nexusVersion: 'nexus2', 
        protocol: 'http', 
        repository: 'maven-releases', 
        version: 'v1'
    }
}
